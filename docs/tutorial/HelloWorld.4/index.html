<!doctype html>
<html>
<head>
	<title>Enyo</title>
	<script src="../../../enyo.js" type="text/javascript"></script>
	<script src="../../../../lib/utils/fu/package.js" type="text/javascript"></script>
	<script src="../../../../lib/utils/youtube/package.js" type="text/javascript"></script>
	<script src="../../../../lib/aura/splitter/Splitter.js" type="text/javascript"></script>
	<style>
		body {
			font-family: Helvetica, Arial, Sans-Serif;
		}
	</style>
</head>
<body class="theme-fu">
	<script type="text/javascript">
		var app = new enyo.HBox({className: "enyo-fit enyo-unselectable", components: [
				{width: 300, kind: "VBox", components: [
					{height: 100, style: "background-color: lightblue; padding: 16px; box-sizing: border-box; overflow: hidden;", components: [
						{content: "Search Name"},
						{name: "input", tagName: "input", attributes: {value: "sparta"}},
						{tagName: "button", content: "Search", style: "margin-left: 8px;", onclick: "searchClick"}
					]},
					{height: "fill", style: "overflow: auto;", components: [
						{name: "list"}
					]}
				]},
				//{kind: "Splitter", width: 8, Xstyle: "background-color: silver;", direction: "left"},
				{width: "fill", name: "main", kind: "VBox", components: [
					{kind: "YouTube", height: "fill", style: "margin: 8px; box-sizing: border-box;"},
					{name: "text", height: 200, style: "overflow: auto; padding: 16px; box-sizing: border-box; font-size: x-large; white-space: pre-wrap;"}
				]}
			],
			searchClick: function() {
				var term = this.$.input.hasNode().value;
				new YouTubeSearch()
					.search(term)
					.response(this, "results")
					;
				//this.$.youTube.setVideoId("Ip7QZPw04Ks");
			},
			results: function(inSender, inGoodies) {
				console.log(inGoodies);
				this.$.list.destroyClientControls();
				for (var i=0, g; g=inGoodies[i]; i++) {
					this.createComponents([
						{tagName: "img", src: g.thumbnail, style: "height: 120px;", onclick: "play", g: g},
						{style: "display: inline-block;", content: g.title.$t}
					], {container: this.$.list});
				}
				this.$.list.render();
			},
			play: function(inSender) {
				this.$.youTube.setVideoId(inSender.g.id);
			}
		}).write();
	</script>
</body>
</html>
